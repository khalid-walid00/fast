
<section class="py-16 ">
  <div class="container">
    <div class="section-title flex items-center justify-between md:mb-10 mb-4">
      <div class="flex flex-col gap-0.5">
        <h2 class=" md:text-[32px] text-base font-bold">{{ t(widget.data.section_title | default('categories')) }}</h2>
        <p class="text-secondary/50 text-base font-normal">{{t('categories_list')}}</p>
      </div>
      <a href="/collections" class="flex items-center md:hidden gap-1 text-xs font-medium cursor-pointer">
        <span class="text-primary">{{t('view_all')}} </span>
        <span class="material-symbols-outlined text-base text-primary">arrow_back</span>
      </a>
    </div>
  </div>

  {% set cols = widget.data.collections or context.collections or [] %}

  {% if widget.data.swipper_view %}
  <div style="padding-left: 0 !important;" class="container">
      <div class="swiper categories-swiper relative">
        <div class="swiper-wrapper md:gap-9 gap-4">
          {% for collection in cols %}
          <div class="swiper-slide flex flex-col items-center !w-[80px] !h-[80px] md:!w-[140px] md:!h-[140px]">
            <a href="collection/{{ collection.handle }}" class="flex flex-col items-center w-full h-full">
              <div class="rounded-full group relative overflow-hidden w-full h-full">
                {% if collection.image and collection.image.fileUrl %}
                <img src="{{ collection.image.fileUrl }}"
                  class="w-full h-full object-cover cursor-pointer group-hover:scale-105 transition-all duration-300"
                  alt="[{{ collection.title }}]">
                {% else %}
                <div class="w-full h-full bg-gray-100"></div>
                {% endif %}
                <div class="absolute inset-0 flex items-center justify-center">
                  <span class="bg-white px-3 rounded-full font-medium text-center text-sm md:text-xl">
                    {{ collection.title }}
                  </span>
                </div>
              </div>
            </a>
          </div>
          
          {% endfor %}
        </div>
        <div class="swiper-pagination"></div>
      </div>
  </div>

  <script>
   document.addEventListener("DOMContentLoaded", function () {
  new Swiper(".categories-swiper", {
    slidesPerView: "auto", // 👈 خليه auto علشان ياخد عرض كل slide فعلي
    spaceBetween: 16,
    loop: true,
    freeMode: true, // 👈 يساعد على التحريك السلس بدون مسافات غريبة
    grabCursor: true,
    autoplay: {
      delay: 2500,
      disableOnInteraction: false,
    },
    speed: 600,
    breakpoints: {
      320: { slidesPerView: "auto", spaceBetween: 12 },
      768: { slidesPerView: "auto", spaceBetween: 16 },
    },
  });
});

    </script>
    
  

  {% else %}
  <div style="padding-left: 0 !important;" class="container">
    <div class="grid grid-cols-3 md:grid-cols-5 gap-6 text-center">
      {% for collection in cols %}
      <a href="collection/{{ collection.handle }}" class="flex flex-col items-center">
        <div class="rounded-full group md:w-[210px] md:h-[210px] w-[156px] h-[156px] relative overflow-hidden">
          {% if collection.image and collection.image.fileUrl %}
          <img src="{{ collection.image.fileUrl }}"
            class="w-full h-full object-cover cursor-pointer group-hover:scale-105 transition-all duration-300"
            alt="[{{ collection.title }}]">
          {% else %}
          <div class="w-full h-full bg-gray-100"></div>
          {% endif %}
          <div
            class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 flex items-center justify-center flex-col">
            <span class="bg-white px-3 rounded-full font-medium text-xl min-w-[98px]">{{ collection.title }}</span>
            <span class="text-white font-bold">{{ collection.productCount | default(0) }} منتج</span>
          </div>
        </div>
      </a>
      {% endfor %}
    </div>
  </div>
  {% endif %}
</section>
