<section class="hero-bg overflow-hidden">
  {% if widget.blocks.length > 0 %}
    <!-- Hero Slider -->
    <div class="hero-swiper swiper relative">
      <div class="swiper-wrapper">
        {% for block in widget.blocks %}
        <div class="swiper-slide" data-slide-index="{{ loop.index }}">
          <div class="hero-split-container" data-slide="{{ loop.index }}">
            <!-- Left side - Text content section -->
            <div class="hero-text-section" style="background-color: {{ block.data.text_section_background_color | default('#B9C1B6') }};">
              <div class="hero-text-content">
                {% if block.data.title %}
                  <h1 class="hero-split-title">
                    {{ block.data.title | safe }}
                  </h1>
                {% endif %}
                {% if block.data.subtitle %}
                  <p class="hero-split-subtitle">
                    {{ block.data.subtitle | safe }}
                  </p>
                {% endif %}
                {% if block.data.button_text %}
                  <a href="{{ block.data.link | default('/collections') }}" class="hero-split-button">
                    {{ block.data.button_text }}
                  </a>
                {% endif %}
              </div>
            </div>
            
            <!-- Right side - Image section -->
            <div class="hero-image-section">
              {% if block.data.image and block.data.image.fileUrl %}
                <img src="{{ block.data.image.fileUrl }}" alt="{{ block.data.alt | default('صورة الهيرو') }}" class="hero-split-image">
              {% elif block.data.image and block.data.image %}
                <img src="{{ block.data.image }}" alt="{{ block.data.alt | default('صورة الهيرو') }}" class="hero-split-image">
              {% else %}
                <img src="https://i.ibb.co/6PqjXfG/chair-hero.png" alt="[كرسي أنيق باللونين الأزرق والأصفر]" class="hero-split-image">
              {% endif %}
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
      
      {% if widget.data.show_pagination %}
        <div class="swiper-pagination"></div>
      {% endif %}
    </div>
    
    <style>
      .hero-swiper .swiper-pagination .swiper-pagination-bullet {
        width: 12px !important;
        height: 12px !important;
        background: #000000 !important;
        opacity: 0.3 !important;
        margin: 0 6px !important;
        border-radius: 50% !important;
        border: 2px solid #000000 !important;
        transition: all 0.3s ease !important;
      }
      .hero-swiper .swiper-pagination .swiper-pagination-bullet-active {
        background: #000000 !important;
        opacity: 1 !important;
        transform: scale(1.2) !important;
        border: 3px solid #000000 !important;
      }
      .hero-swiper .swiper-pagination {
        bottom: 20px !important;
        right: 20px !important;
        left: auto !important;
        transform: none !important;
        z-index: 10 !important;
        width: auto !important;
      }
    </style>
    
    
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        // التأكد من وجود السلايدر قبل تهيئته
        const swiperContainer = document.querySelector('.hero-swiper');
        if (!swiperContainer) return;
        
        const heroSwiper = new Swiper('.hero-swiper', {
          loop: true,
          autoplay: {
            delay: 5000,
            disableOnInteraction: false,
            pauseOnMouseEnter: true,
          },
          speed: 1000,
          allowTouchMove: true,
          grabCursor: true,
          pagination: {
            el: '.swiper-pagination',
            clickable: true,
          },
          on: {
            init: function() {
              console.log('Swiper initialized with', this.slides.length, 'slides');
              // تطبيق الألوان من الإعدادات عند التهيئة
              const slides = this.slides;
              
              slides.forEach((slide, index) => {
                const slideIndex = slide.getAttribute('data-slide-index');
                const textSection = slide.querySelector('.hero-text-section');
                
                if (textSection) {
                  if (slideIndex == 1) {
                    textSection.style.backgroundColor = '#B9C1B6';
                  } else if (slideIndex == 2) {
                    textSection.style.backgroundColor = '#D9B297';
                  } else if (slideIndex == 3) {
                    textSection.style.backgroundColor = '#B9C4CB';
                  }
                }
              });
            },
            slideChange: function() {
              console.log('Slide changed to:', this.activeIndex);
              // تطبيق الألوان عند تغيير الشريحة
              const activeSlide = this.slides[this.activeIndex];
              const textSection = activeSlide.querySelector('.hero-text-section');
              
              if (textSection) {
                const slideIndex = activeSlide.getAttribute('data-slide-index');
                if (slideIndex == 1) {
                  textSection.style.backgroundColor = '#B9C1B6';
                } else if (slideIndex == 2) {
                  textSection.style.backgroundColor = '#D9B297';
                } else if (slideIndex == 3) {
                  textSection.style.backgroundColor = '#B9C4CB';
                }
              }
            }
          }
        });
      });
    </script>
  {% else %}
    <!-- Hero Default (Fallback) -->
    <div class="hero-split-container" data-slide="1">
      <!-- Left side - Text content section -->
      <div class="hero-text-section" style="background-color: #B9C1B6;">
        <div class="hero-text-content">
          <h1 class="hero-split-title">
            أثاث أنيق لمنزلك<br>العصري
          </h1>
          <p class="hero-split-subtitle">
            اكتشف تشكيلتنا الواسعة من الأثاث<br>بتصاميم عصرية وجودة عالية
          </p>
          <a href="/collections" class="hero-split-button">تسوق الآن</a>
        </div>
      </div>
      
      <!-- Right side - Image section -->
      <div class="hero-image-section">
        <img src="https://i.ibb.co/6PqjXfG/chair-hero.png" alt="[كرسي أنيق باللونين الأزرق والأصفر]" class="hero-split-image">
      </div>
    </div>
  {% endif %}
</section>

