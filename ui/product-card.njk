<div class="bg-white rounded-xl border-[1.5px]  border-Strok overflow-hidden h-full flex flex-col">
    <div class="relative">
        <a  href="/{{t('lang')}}/product/{{ data.product.slug }}" class="block">
            <img alt="{{ data.product.title }}"
                src="{{ data.product.images[0].fileUrl | default('https://placehold.co/600x400/orange/white') }}"
                alt="{{ product.title }}" class="w-full h-40 object-cover">
        </a>
        {% if data.product.pricing.compareAtPrice and data.product.pricing.compareAtPrice > data.product.pricing.price
        %}
        <span class="absolute top-2 right-2 bg-secondary text-white md:text-sm text-[10px] max-md:py-[3px] px-2 py-[1px] rounded">{{
            ((data.product.pricing.compareAtPrice - data.product.pricing.price) * 100 /
            data.product.pricing.compareAtPrice) | round(1) }}% -
        </span>
        {% endif %}
    </div>
    <div class="md:px-4 px-3 md:py-5 max-md:pt-3 max-md:pb-4 flex flex-col gap-4 flex-1">
        <div class="flex flex-col gap-4 flex-1">
          <div class="flex flex-col md:gap-2 gap-1 flex-1">
            <div class="flex flex-row md:flex-col justify-between gap-2 ">
                <a class="font-medium md:text-xl text-sm max-h-[104px] overflow-y-hidden line-clamp-3" href="/{{t('lang')}}/product/{{ data.product.slug }}">{{ data.product.title}}</a>
                <div class="flex md:items-center items-start gap-3">
                    <div class="flex md:items-center items-start gap-0.5">
                        <svg width="17" height="17" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <g clip-path="url(#clip0_287_3343)">
                                <rect width="16" height="16" transform="translate(0.5 0.5)" fill="white" />
                                <path
                                    d="M8.88798 0.773247L10.9336 5.78776L16.125 6.27419C16.2069 6.28123 16.2851 6.31358 16.3496 6.36716C16.4141 6.42073 16.462 6.49314 16.4873 6.57525C16.5127 6.65736 16.5143 6.74551 16.492 6.82858C16.4697 6.91166 16.4244 6.98594 16.3619 7.04208L12.4323 10.6356L13.5911 15.9644C13.6032 16.0204 13.6047 16.0783 13.5954 16.1349C13.5861 16.1915 13.5662 16.2456 13.5369 16.2941C13.5076 16.3425 13.4695 16.3845 13.4247 16.4175C13.38 16.4505 13.3294 16.4739 13.276 16.4863C13.1655 16.5108 13.0503 16.4882 12.9557 16.4235L8.49605 13.6306L4.0247 16.4371C3.97799 16.4668 3.92613 16.4866 3.87212 16.4952C3.81811 16.5038 3.76301 16.5011 3.71 16.4872C3.65698 16.4734 3.6071 16.4487 3.56323 16.4145C3.51936 16.3804 3.48237 16.3374 3.45439 16.2882C3.42635 16.24 3.40767 16.1864 3.3994 16.1306C3.39113 16.0748 3.39345 16.0179 3.40621 15.963L4.56636 10.6342L0.641884 7.04208C0.559394 6.96527 0.508842 6.85763 0.501054 6.7422C0.493266 6.62676 0.528862 6.51272 0.600218 6.42449C0.67886 6.33993 0.785838 6.29091 0.898395 6.28785L6.07027 5.80143L8.11584 0.773247C8.14884 0.694658 8.2029 0.627837 8.27145 0.580924C8.34 0.534011 8.42007 0.509033 8.50191 0.509033C8.58375 0.509033 8.66382 0.534011 8.73237 0.580924C8.80092 0.627837 8.85498 0.694658 8.88798 0.773247Z"
                                    fill="#FFC700" />
                            </g>
                            <defs>
                                <clipPath id="clip0_287_3343">
                                    <rect width="16" height="16" fill="white" transform="translate(0.5 0.5)" />
                                </clipPath>
                            </defs>
                        </svg>
                        <span class="text-secondary max-md:text-xs font-semibold">5</span>
                    </div>
                    <span class="font-semibold max-md:hidden text-gray">6 {{t('reviews')}} </span>
                </div>
            </div>
            {% if data.product.collections | length > 0 %}
                <div class="flex gap-1 items-center">
                    {% for index, item in data.product.collections %}
                    <p class="text-right text-gray/80 md:text-base text-xs font-semibold">{{ item.title }}</p>

                    {% endfor %}
                </div>
                {% endif %}
            </div>
            {% if data.product.pricing.price %}
            <div class="flex items-center flex-wrap justify-start  ">
                <p class="md:text-2xl text-base font-bold text-secondary ml-2">
                    {{ data.product.pricing.price | money }}
                </p>
                {% if data.product.pricing.compareAtPrice and data.product.pricing.compareAtPrice >
                data.product.pricing.price %}
                <p class=" text-gray text-sm md:text-base line-through">
                    {{ data.product.pricing.compareAtPrice | money }}
                </p>
                {% endif %}
            </div>
            {% endif %}
        </div>

        {% if data.product.variantsCount > 0 %}
        <a href="/{{t('lang')}}/product/{{ data.product.slug }}"
            class="w-full bg-primary text-white md:py-3 py-2 h-11 md:h-[52px]  rounded-lg flex items-center justify-center  hover:opacity-95 ">
            <span class=" text-nowrap font-medium">{{t('view_details')}}</span>
        </a>
        {% else %}
        <button @click="addProductToCart('{{ data.product._id }}', 1, [])" :disabled="loading['{{ data.product._id }}']"
            class="w-full md:py-3 py-2 h-11 md:h-[52px] rounded-lg font-medium flex items-center justify-center hover:opacity-95"
            :class="loading['{{ data.product._id }}']
          ? 'bg-gray-100 border border-gray-200 text-gray-400 cursor-not-allowed'
          : 'bg-primary text-white active:scale-105'">

            <template v-if="loading['{{ data.product._id }}']">
                <div class="flex items-center justify-center gap-2">
                    {% ui "loading.njk" %}
                </div>
            </template>

            <template v-else>
                {{t('add_to_cart')}}
            </template>
        </button>




        {% endif %}
    </div>
</div>